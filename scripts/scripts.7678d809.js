"use strict";var app=angular.module("F1App",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","timer"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"RaceController"}).when("/race/:season/:round",{templateUrl:"views/raceDetail.html",controller:"SingleRaceController"}).when("/driver/:id",{templateUrl:"views/driverDetail.html",controller:"DriverController"}).when("/about",{templateUrl:"views/about.html"}).otherwise({redirectTo:"/"})}]);app.controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("F1App").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),app.controller("NavController",["$scope","$location",function(a,b){a.isActive=function(a){var c=a===b.path();return c}}]),app.controller("RaceController",["$scope","ergastAPIservice",function(a,b){a.raceFilter="",a.nextRace={},a.raceResults=[],a.pageClass="page-main",a.searchFilter=function(b){var c=new RegExp(a.raceFilter,"i");return!a.raceFilter||c.test(b.raceName)},a.results=function(c){a.raceseason=c,b.getRaceResults(c).success(function(b){a.raceResults=b.MRData.RaceTable.Races.reverse(),console.log(a.raceResults)})},b.getNextRace().success(function(b){var c=b.MRData.RaceTable.Races[0].date,d=b.MRData.RaceTable.Races[0].time;a.countdown=moment.utc(c+" "+d),a.nextRace=b.MRData.RaceTable.Races[0],console.log(a.nextRace)}),a.clearFilter=function(){a.raceFilter=""}}]),app.controller("SingleRaceController",["$scope","$routeParams","ergastAPIservice",function(a,b,c){a.season=b.season,a.round=b.round,a.pageClass="page-race-result",c.getRaceResult(a.season,a.round).success(function(b){a.raceResult=b.MRData.RaceTable.Races[0],console.log(a.raceResult)})}]),app.controller("DriverController",["$scope","$routeParams","ergastAPIservice",function(a,b,c){a.nameFilter=null,a.driversList=[],a.id=b.id,c.getDriver(a.id).success(function(b){a.driver=b.MRData.DriverTable.Drivers[0]})}]),app.factory("ergastAPIservice",["$http",function(a){var b={};return b.getRaceResults=function(b){return void 0===b&&(b="current"),a({method:"JSONP",url:"http://ergast.com/api/f1/"+b+"/results/1.json?callback=JSON_CALLBACK"})},b.getRaceResult=function(b,c){return a({method:"JSONP",url:"http://ergast.com/api/f1/"+b+"/"+c+"/results.json?callback=JSON_CALLBACK"})},b.getNextRace=function(){return a({method:"JSONP",url:"http://ergast.com/api/f1/current/next.json?callback=JSON_CALLBACK"})},b.getDriver=function(b){return a({method:"JSONP",url:"http://ergast.com/api/f1/drivers/"+b+".json?callback=JSON_CALLBACK"})},b}]);